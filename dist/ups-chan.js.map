{"version":3,"sources":["webpack:///webpack/bootstrap cd5ea8813515d7a14031","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"@babel/runtime/helpers/interopRequireWildcard\"","webpack:///./bot/verbose/messages.js","webpack:///./bot/database/database.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"moment-timezone\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"fs\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@babel/runtime/core-js/object/entries\"","webpack:///./bot/verbose/functions.js","webpack:///./bot/auth/authorization.js","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@babel/runtime/core-js/json/stringify\"","webpack:///./bot/nodewars/features.js","webpack:///external \"path\"","webpack:///./bot/app.js","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"rethinkdbdash\"","webpack:///./bot/commands/regular-commands.js","webpack:///./bot/commands/admin-commands.js","webpack:///./bot/events/events.js","webpack:///external \"@babel/runtime/core-js/object/get-prototype-of\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///./bot/nodewars/nodewar.js","webpack:///external \"@babel/runtime/core-js/object/values\"","webpack:///external \"sugar\"","webpack:///./bot/nodewars/db.js","webpack:///./bot/spoiler/spoiler.js","webpack:///./bot/spoiler/gifgenerator.js","webpack:///external \"@babel/runtime/core-js/object/assign\"","webpack:///external \"canvas-prebuilt\"","webpack:///external \"gifencoder\"","webpack:///external \"sanitize-filename\"","webpack:///./bot/enhancing/enhancing.js","webpack:///external \"@babel/runtime/helpers/toArray\"","webpack:///external \"@babel/runtime/core-js/object/keys\"","webpack:///external \"js-yaml\"","webpack:///external \"lodash\"","webpack:///./bot/helpers.js","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"discord.js\"","webpack:///./auth.json"],"names":["randomMessage","messages","Math","floor","random","length","getRandomMeeseeksInteraction","getRandomGoodLuckMessage","getRandomDontSpoilMessage","getRandomLossMessage","getRandomWinMessage","getRandomOkMessage","r","require","Connect","guild","console","log","name","db","id","UpdateConfiguration","updates","table","get","update","run","UpdateConfigurationArray","key","remove","row","difference","append","syncConnectedServers","client","dbList","guilds","forEach","includes","dbCreate","then","tableCreate","insert","nodeWarChannel","attendingRole","adminRolesIds","timezone","sendEmbedHelpAsDM","message","fields","sendDM","embed","color","title","member","displayName","url","description","timestamp","tz","footer","icon_url","user","avatarURL","text","username","content","createDM","DM","send","checkMemberForRolesIds","rolesIds","roles","some","isPrivileged","DB","conf","permissions","has","sendHelp","value","canCreateNodeWar","toString","clearAttendingMembers","channel","role","find","members","removeRole","catch","error","attendNodeWar","msg","addRole","Messages","cancelNodeWarAttendance","listAttendingMembers","reply","nwlist","nameList","push","m","join","size","Discord","auth","Client","on","tag","setPresence","game","type","events","event","e","eventName","args","handleEvent","commands","rCommands","aCommands","command","call","login","token","meeseeksAnswer","author","setTimeout","delete","ups","regex","randomly","test","react","emoji","emojis","secretAlzy","channels","pedoAge","bot","exec","ePedoBear","eKappa","grammar","ex","w","help","listEmojis","emojiList","map","identifier","split","listChannels","channelList","c","listRoles","roleList","Event","instantiate","guildMemberUpdate","Array","prototype","diff","array","filter","x","oldM","newM","oldRoles","newRoles","ignore","removed","added","messageReactionAdd","messageReaction","emojiKey","lul","handleNodeWar","nodewar","list","attend","cancel","startsWith","k","nodewarChannel","awaitMessages","maxMatches","time","errors","nwChannel","collected","first","createChannel","handleRouting","channelName","createRole","nodewarManager","Nodewar","node","slice","trim","shift","toLowerCase","firstArg","secondArg","NodewarDB","nodewarCheck","cancelNodeWar","endNodeWar","Date","setLocale","sugarDate","create","tzDate","isValid","format","createNodeWar","result","victory","updatedNW","isActive","attendingMembers","setNodewarTopic","date","endDate","add","hours","minutes","fDate","nwObject","createdAt","creatorId","updateCurrentNodeWar","insertNewNodeWar","respondNodewar","topic","setTopic","fs","Spoiler","spoilThisContent","match","parts","spoiler","printSpoiler","messageContent","maxLines","g","createSpoilerGif","sendFile","filePath","unlink","err","fileName","done","options","files","attachment","path","Font","GIF_PATH","FONT_PATH","SOURCE_SANS_PRO","GifGenerator","gifConfig","colours","colors","config","margin","width","lineHeight","placeholderText","fontSize","background","stroke","placeholder","lineWidth","hash","getTime","gifPath","createGif","lines","prepareLines","height","context","createCanvasContext","encoder","prepareEncoder","renderSpoilerMessage","renderLines","finish","breakIntoLines","linesBreak","j","line","words","i","word","max","measureText","readStream","createReadStream","writeStream","createWriteStream","pipe","start","setRepeat","setDelay","setQuality","clearContextBackground","renderTextToContext","addFrame","marginTop","canvas","getContext","addFont","fontName","font","fillStyle","strokeStyle","rect","fill","colour","fillText","handleEnhance","keyFs","failstackManager","failstacks","target","names","notHelping","safeLoad","readFileSync","grades","flattenDeep","o","obj","iType","v","current","minStack","maxStack","superSplit","string","n","ceil","a","superArraySplit","T","regexSplit","RegExp","isWordInList"],"mappings":"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","file":"ups-chan.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cd5ea8813515d7a14031","module.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/interopRequireDefault\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/interopRequireWildcard\"\n// module id = 1\n// module chunks = 0","function randomMessage(messages) {\n  return messages[Math.floor(Math.random() * messages.length)]\n}\n\nexport function getRandomMeeseeksInteraction() {\n  const messages = [\n    \"ðŸ‘‹ Hey Mr Meeseeks, look at me !! ðŸ‘‹\",\n    \"I'm 10 times better than you!\",\n    \"I didn't do this!\",\n    \"You bringed me into this!\",\n    \"I could do the same thing.\",\n    \"Is that all you can do ?\"\n  ]\n  return randomMessage(messages)\n}\nexport function getRandomGoodLuckMessage() {\n  const messages = [\n    \"I believe.\",\n    \"May the force be with you.\",\n    \"The force will be with you. Always.\",\n    \"Blessed be the RNG gods.\",\n    \"Lib would get it first try.\",\n    \"Alzy has done it twice.\",\n    \"DO IT.\",\n    \"Do you trust me?\",\n    \"You were made for this.\",\n    \"You can do it.\",\n    \"Yup. We're going for it.\",\n    \"We're doing it.\",\n    \"Evie would not hesitate.\",\n    \"Remember than someone failed TRI ogre 12 times tho...\"\n  ]\n  return randomMessage(messages)\n}\n\nexport function getRandomDontSpoilMessage() {\n  const messages = [\n    \"Spoiler are the path to the dark side.\",\n    \"For the night is long, and full of spoilers.\",\n    \"10% luck, 20 % skill, 5% pleasure, 0% spoiler\",\n    \"Dumbledore is dead.\",\n    \"I AM your father!\",\n    \"No spoiler here.\",\n    \"Another day on the job son. No spoiler.\",\n    \"You shall not spoil !\",\n    \"If I live, spoiler shall die!\",\n    \"Get down !!!\",\n    \"I'll protect you from the spoils <3\"\n  ]\n  return randomMessage(messages)\n}\n\nexport function getRandomLossMessage() {\n  const messages = [\n    \"GG, we got zerged.\",\n    \"NextTime 4sure.\",\n    \"Bad round.\",\n    \"Can we redo, I had to scratch my nose?\",\n    \"Unlucky I guess.\",\n    \"GG boys... See you next week...\",\n    \"Just numbers.\"\n  ]\n  return randomMessage(messages)\n}\n\nexport function getRandomWinMessage() {\n  const messages = [\n    \"Congratulations to @everyone for this insane win !!!\",\n    \"GG. I hope I was more funny and clever.\",\n    \"GG Germany won, once again ...\",\n    \"GG, Welcome to Alustin.\",\n    \"Croxus got defeated once again! GG.\",\n    \"GG, big thanks to JLN, once again.\",\n    \"GG EZ sniped node EZ\",\n    \"GG boys! See you next week.\"\n  ]\n  return randomMessage(messages)\n}\n\nexport function getRandomOkMessage() {\n  const messages = [\n    \"As you wish.\",\n    \"Your will, my hands.\",\n    \"Your wishes, my commands.\",\n    \"At your service.\",\n    \"Of course master.\",\n    \"I obey.\",\n    \"I'm yours to command.\",\n    \"Anything to please you my lord.\",\n    \"Yes please daddy.\",\n    \"Oh yeah, that's the spot baby...\",\n    \"I heard lib is a woman, is that true ?? Uh I'm sorry that's the wrong message !! I meant : Yes master.\",\n    \"Without hesitation.\",\n    \"Yes master.\",\n    \"Right away sir.\",\n    \"Sir, yes sir.\",\n    \"Rush b cyka blyat.. *enables english* Yes mylord.\",\n    \"Gladly\",\n    \"Whatever you say.\",\n    \"It's not like i wanted to do that >_<\",\n    \"I would have you right now on this table until you beg for mercy twice.\"\n  ]\n  return randomMessage(messages)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/verbose/messages.js","const r = require(\"rethinkdbdash\")()\n\n/**\n * Connect to a specified guild database.\n * @param {Guild} guild\n */\nexport function Connect(guild) {\n  console.log(`Connecting to the DB of ${guild.name}`)\n  return r.db(guild.id)\n}\n\nexport function UpdateConfiguration(guild, updates) {\n  console.log(\"Updating Configuration....\")\n  return Connect(guild)\n    .table(\"configuration\")\n    .get(0)\n    .update(updates)\n    .run()\n}\n\nexport function UpdateConfigurationArray(guild, key, updates, remove = false) {\n  console.log(key)\n  console.log(updates)\n  console.log(remove)\n  return remove\n    ? Connect(guild)\n        .table(\"configuration\")\n        .get(0)\n        .update({ [key]: r.row(key).difference(updates) })\n        .run()\n    : Connect(guild)\n        .table(\"configuration\")\n        .get(0)\n        .update({ [key]: r.row(key).append(updates) })\n        .run()\n}\n/**\n * Sync the connected guilds (servers) with the db backend by creating\n * the tables if they don't exist.\n * @param {Client} client\n */\nexport async function syncConnectedServers(client) {\n  // console.log(r.dbList())\n  let dbList = await r.dbList().run()\n  console.log(dbList)\n  client.guilds.forEach(guild => {\n    // console.log(guild.id)\n    if (!dbList.includes(guild.id)) {\n      console.log(`Creating DB ${guild.id} (${guild.name}).`)\n      r\n        .dbCreate(guild.id)\n        .run()\n        .then(result => {\n          r\n            .db(guild.id)\n            .tableCreate(\"nodewar\")\n            .run()\n          r\n            .db(guild.id)\n            .tableCreate(\"configuration\")\n            .run()\n            .then(result => {\n              r\n                .db(guild.id)\n                .table(\"configuration\")\n                .insert({\n                  id: 0,\n                  nodeWarChannel: \"\",\n                  attendingRole: \"Attending\",\n                  adminRolesIds: []\n                })\n                .run()\n                .then(result =>\n                  console.log(\n                    `The fresh DB ${guild.id} (${guild.name}) is ready.`\n                  )\n                )\n            })\n        })\n    } else {\n      console.log(`Found DB ${guild.id} (${guild.name}), ready to use.`)\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/database/database.js","module.exports = require(\"@babel/runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/regenerator\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/asyncToGenerator\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"moment-timezone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment-timezone\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/classCallCheck\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/slicedToArray\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"@babel/runtime/core-js/object/entries\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/object/entries\"\n// module id = 10\n// module chunks = 0","import moment from \"moment-timezone\"\nconst timezone = \"Europe/Paris\"\n\nexport function sendEmbedHelpAsDM(message, client, fields) {\n  sendDM(message, client, {\n    embed: {\n      color: 16753920,\n      title: `${message.member.displayName} customized UPS-Chan help ðŸ’—`,\n      url: \"https://www.ups.com\",\n      description: \"This is a list of all the commands.\",\n      fields: fields,\n      timestamp: moment().tz(timezone),\n      footer: {\n        icon_url: client.user.avatarURL,\n        text: client.user.username\n      }\n    }\n  })\n}\n\nfunction sendDM(message, client, content) {\n  message.member.user.createDM().then(DM => DM.send(content))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/verbose/functions.js","import * as DB from \"../database/database.js\"\n\n//Mom&Dad,WeebOverlords,Lider,Test\n\n// export const authorizedRolesIds = [\n//   \"312317944417878016\",\n//   \"341182224139419650\",\n//   \"316283334768459777\",\n//   \"248702697610412032\"\n// ]\n\nexport function checkMemberForRolesIds(member, rolesIds) {\n  return member.roles.some(r => rolesIds.includes(r.id)) ? true : false\n}\n\nexport async function isPrivileged(member) {\n  const conf = await DB.Connect(member.guild)\n    .table(\"configuration\")\n    .get(0)\n    .run()\n  return (\n    member.permissions.has(\"ADMINISTRATOR\") ||\n    checkMemberForRolesIds(member, conf.adminRolesIds)\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/auth/authorization.js","module.exports = require(\"@babel/runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/createClass\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"@babel/runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/json/stringify\"\n// module id = 14\n// module chunks = 0","import * as Messages from \"../verbose/messages.js\"\n\nimport { checkMemberForRolesIds } from \"../auth/authorization.js\"\nimport { sendEmbedHelpAsDM } from \"../verbose/functions.js\"\n\nexport function sendHelp(message, client) {\n  const fields = [\n    {\n      name: \"__Nodewar commands__\",\n      value:\n        \"- **$attend** - set your role to *Attending*.\\n- **$cancel** - remove yourself from the *Attending* list.\\n- **$nodewar** - tells you the date for the the upcoming nodewar.\"\n    },\n    {\n      name: \"__Nodewar administrator commands__\",\n      value:\n        \"- **$nwlist** - list all the participants for the upcoming nodewar.\\n- **$nodewar *date*** - creates a nodewar event at the specified date.\\n- **$nodewar cancel** - cancel the current nodewar\\n- **$nodewar win** - end the current nodewar with a win.\\n- **$nodewar loss** - end the current nodewar with a loss.\"\n    },\n    {\n      name: \"__ServerAdmin Nodewar commands__\",\n      value:\n        \"- **$nodewar channel *channelName*** - Change the nodewar channel used by UPS-chan.\\n- **$nodewar role add *roleName*** - Add a role to the authorized nodewar roles.\\n- **$nodewar role remove *roleName*** - Remove a role from the authorized nodewar roles.\"\n    }\n  ]\n  sendEmbedHelpAsDM(message, client, fields)\n}\n/**\n * Check if a member can create a nodewar\n * @param  {[type]} member [description]\n * @return {[type]}        [description]\n */\nexport function canCreateNodeWar(member, rolesIds) {\n  console.log(\"is admin ? : \" + member.permissions.has(\"ADMINISTRATOR\"))\n  console.log(\"roles Ids :\" + rolesIds.toString())\n  return (\n    member.permissions.has(\"ADMINISTRATOR\") ||\n    checkMemberForRolesIds(member, rolesIds)\n  )\n}\n\n/**\n * Clear the attending members.\n * @param  {[type]} message [description]\n * @return {[type]}         [description]\n */\nexport function clearAttendingMembers(message, channel, role) {\n  message.member.guild.roles\n    .find(\"name\", role.name)\n    .members.forEach(member => member.removeRole(role).catch(console.error))\n  message.channel.send(`The attending roles have been correctly removed.`)\n}\n\n/**\n * Attend a Nodewar\n * @param  {[type]} msg [description]\n * @return {[type]}     [description]\n */\nexport function attendNodeWar(msg, channel, role) {\n  // Assign the role to the member\n  msg.member.addRole(role).catch(console.error)\n  // Send the message, mentioning the member\n  msg.member.user.createDM().then(function(DM) {\n    DM.send(Messages.getRandomOkMessage())\n  })\n  // msg.reply(\"As you wish.\")\n  channel.send(\n    msg.member.user.username + \" will attend at the upcoming memewar!\"\n  ) // TAG the user\n}\n\n/**\n * Cancel an attendance to a NodeWar\n * @param  {[type]} msg [description]\n * @return {[type]}     [description]\n */\nexport function cancelNodeWarAttendance(msg, channel, role) {\n  // Remove the role from the member\n  msg.member.removeRole(role).catch(console.error)\n  // Send the message, mentioning the member\n  msg.member.user.createDM().then(function(DM) {\n    DM.send(Messages.getRandomOkMessage())\n  })\n  channel.send(\n    msg.member.user.username + \" will not attend! Next time fosure though.\"\n  )\n}\n\n/**\n * List attending members.\n * @param  {[type]} message     [description]\n * @param  {[type]} channel [description]\n * @param  {[type]} role    [description]\n * @return {[type]}         [description]\n */\nexport function listAttendingMembers(message, channel, role, conf) {\n  //Check for roles\n  //If no auth we return early\n  if (!canCreateNodeWar(message.member, conf.adminRolesIds)) {\n    message.reply(\"Ask one of your overlords.\")\n    return\n  }\n  // Assign the cached members of the role 'Attending' to the variable\n  let nwlist = message.member.guild.roles.find(\"name\", role.name).members\n  // Send the message, mentioning the member\n  let nameList = []\n  nwlist.forEach(m => nameList.push(\"- \" + m.displayName))\n  console.log(nameList)\n  nameList = nameList.join(\"\\n \")\n  if (nwlist.size > 0) {\n    message.channel.send(\n      `**Here's a list of everyone who's attending to the upcoming nodewar :**\\n ${nameList} \\n That is a total of **${\n        nwlist.size\n      }** people.`\n    )\n  } else {\n    message.channel.send(\n      \"There are no participants for the upcoming nodewar yet.\"\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/nodewars/features.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 16\n// module chunks = 0","const Discord = require(\"discord.js\")\nconst auth = require(\"../auth.json\")\nconst client = new Discord.Client()\n\nimport * as DB from \"./database/database.js\"\n\nimport * as rCommands from \"./commands/regular-commands.js\"\nimport * as aCommands from \"./commands/admin-commands.js\"\n\nimport * as events from \"./events/events.js\"\n\nimport { handleNodeWar } from \"./nodewars/nodewar.js\"\nimport { spoilThisContent } from \"./spoiler/spoiler.js\"\nimport { handleEnhance } from \"./enhancing/enhancing.js\"\n/**\n * Here we have to call this to initiate the bot.\n */\nclient.on(\"ready\", () => {\n  console.log(`Logged in as ${client.user.tag}!`)\n  //Sync the DB with every server.\n  DB.syncConnectedServers(client)\n  client.user.setPresence({\n    game: {\n      name: \"Waiting for Lahn\",\n      url: \"http://twitch.tv/fix8radio\",\n      type: \"STREAMING\"\n    }\n  })\n})\n\n/**\n * Sync the DB when we join a new server.\n */\nclient.on(\"guildCreate\", () => DB.syncConnectedServers(client))\n\n/**\n * To our very special princess...\n */\nclient.on(\"message\", message => {\n  if (message.content === \"I love you.\") {\n    // console.log(message.member.roles)\n    message.reply(\"I know.\")\n  }\n})\n\n/**\n * Fancy event handler!\n * @type {[type]}\n */\nObject.entries(events).forEach(([key, event]) => {\n  let e = new event()\n  client.on(e.eventName, (...args) => {\n    e.handleEvent(client, ...args)\n  })\n})\n\n/**\n * Call a custom command on each message.\n */\nclient.on(\"message\", message => {\n  // console.log(`New message : ${message}`)\n  // console.log(`User:${message.author.username}, ID: ${message.author.id}`)\n  if (message.member != null && message.guild != null) {\n    //Pass the message to all the commands ES2016+ PogChamp.\n    const commands = { ...rCommands, ...aCommands }\n    Object.entries(commands).forEach(([command, call]) => call(message, client))\n    spoilThisContent(message, client)\n    handleNodeWar(message, client)\n    handleEnhance(message, client)\n  } else {\n    console.log(\"No member or no guild found!\")\n  }\n})\n\n/**\n * This logs the bot in with the token from auth.json\n */\nclient.login(auth.token)\n\n\n\n// WEBPACK FOOTER //\n// ./bot/app.js","module.exports = require(\"@babel/runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/extends\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/defineProperty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/defineProperty\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"rethinkdbdash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rethinkdbdash\"\n// module id = 20\n// module chunks = 0","import moment from \"moment-timezone\"\nimport { sendEmbedHelpAsDM } from \"../verbose/functions.js\"\nimport { getRandomMeeseeksInteraction } from \"../verbose/messages.js\"\nconst timezone = \"Europe/Paris\"\n\nexport function meeseeksAnswer(message, client) {\n  //MeeseeksBOT ID\n  if (message.author.id == \"159985870458322944\") {\n    message.channel.send(getRandomMeeseeksInteraction()).then(m => {\n      setTimeout(() => {\n        m.delete()\n      }, 2500)\n    })\n  }\n}\n\nexport function ups(message, client) {\n  const regex = /(\\bups\\b)+/gim\n  let randomly = Math.floor(Math.random() * 4)\n  if (regex.test(message.content) && randomly == 1) {\n    message\n      .react(\"ðŸ‡º\")\n      .then(() => message.react(\"ðŸ‡µ\"))\n      .then(() => message.react(\"ðŸ‡¸\"))\n      .then(() => {\n        const emoji = message.guild.emojis.find(\"name\", \"PagChomp\")\n        message.react(emoji)\n      })\n      .catch(() => console.error(\"One of the emojis failed to react.\")) // message.react(\"316287767648927744\")\n  }\n}\n\nexport function secretAlzy(msg) {\n  if (msg.content === \"alzy\") {\n    console.log(\"Alzy !!\")\n    // Send the message to a designated channel on a server:\n    const channel = msg.member.guild.channels.find(\n      \"name\",\n      \"drama-super-important-and-private-stuff\"\n    )\n    console.log(channel)\n    // Do nothing if the channel wasn't found on this server\n    if (!channel) return\n    // Send the message, mentioning the member\n    channel.send(\n      `https://cdn.discordapp.com/attachments/318482214071566336/402574859013455873/roar.PNG`\n    )\n  }\n}\n\nexport function pedoAge(msg, client) {\n  const regex = /(\\bunderage\\b|\\bage\\b)+/gim\n  let m\n  // console.log(\"I'm a bot ? \" + msg.author.bot);\n  let randomly = Math.floor(Math.random() * 2)\n  if (\n    randomly == 1 &&\n    msg.author.bot == false &&\n    (m = regex.exec(msg.content)) !== null\n  ) {\n    console.log(\"Matched age somewhere...\")\n    const ePedoBear = client.emojis.find(\"name\", \"PedoBear\") || \":)\"\n    const eKappa = client.emojis.find(\"name\", \"Kappa\") || \":3\"\n    const reply = `${ePedoBear} Age is nothing but a number ... ${eKappa}`\n    // console.log(reply);\n    msg.reply(reply)\n  }\n}\n\nexport function grammar(msg) {\n  const ex = [\"execpt\", \"exectp\", \"excpet\", \"excetp\", \"except\", \"excpect\"]\n  if (ex.some(w => msg.content.includes(w))) {\n    msg.reply(\"Expect. Expecting. \")\n  }\n}\n\nexport function help(message, client) {\n  if (message.content === \"$help\") {\n    const fields = [\n      {\n        name: \"__Commands__\",\n        value:\n          \"- **$nodewar help** - Gives you the nodewar help commands.\\n- *topic* **$spoiler** *content* - Creates a spoiler for your content.\\n- **$fs *tet ogre* Tells you an appropriate failstack number to slam your gear on.\"\n      },\n      {\n        name: \"__Nodewar commands__\",\n        value:\n          \"- **$attend** - set your role to *Attending*.\\n- **$cancel** - remove yourself from the *Attending* list.\\n- **$nodewar** - tells you the date for the the upcoming nodewar.\"\n      },\n      {\n        name: \"__Admin commands__\",\n        value:\n          \"- **$listEmojis** - List all the Emojis.\\n- **$listRoles** - List all the Roles.\\n- **$listChannels** - List all the Channels.\\n\"\n      },\n      {\n        name: \"__Admin Nodewar commands__\",\n        value:\n          \"- **$nwlist** - list all the participants for the upcoming nodewar.\\n- **$nodewar *date*** - creates a nodewar event at the specified date.\\n- **$nodewar cancel** - cancel the current nodewar\\n- **$nodewar win** - end the current nodewar with a win.\\n- **$nodewar loss** - end the current nodewar with a loss.\"\n      }\n    ]\n    sendEmbedHelpAsDM(message, client, fields)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/commands/regular-commands.js","// import * as Meeseeks from \"../helpers.js\"\nimport { isPrivileged } from \"../auth/authorization.js\"\n\n/**\n * List Emojis the bot has access to.\n * @param  {[type]}  message [description]\n * @param  {[type]}  client  [description]\n * @return {Boolean}         [description]\n */\nexport function listEmojis(message, client) {\n  if (message.content === \"$listEmojis\") {\n    if (!isPrivileged(message.member)) return\n    console.log(\"listing emojis\")\n    const emojiList = client.emojis.map(\n      e =>\n        `**${client.emojis.get(e.id)} Name**: ${e.name}, **Identifier**: ${\n          e.identifier\n        }, **ID:** ${e.id}`\n    )\n\n    // let toSend = Meeseeks.superSplit(emojiList.join(\"\\n\"), 2000)\n    message.channel.send(emojiList.join(\"\\n\"), { split: true })\n    // console.log(toSend);\n    // emojiList.forEach(el => message.channel.send(el, { split: true }))\n    // Meeseeks.superArraySplit(Array(50).fill(mock), 500).forEach(el => console.log(el))\n  }\n}\n\n/**\n * List Emojis the bot has access to.\n * @param  {[type]}  message [description]\n * @param  {[type]}  client  [description]\n * @return {Boolean}         [description]\n */\nexport function listChannels(message, client) {\n  if (message.content === \"$listChannels\") {\n    console.log(\"listing channels\")\n    const channelList = message.member.guild.channels.map(\n      c => `**$Name**: ${c.name}, **Type**: ${c.type}, **ID:** ${c.id}`\n    )\n    message.channel.send(channelList.join(\"\\n\"), { split: true })\n  }\n}\n\n/**\n * List channels the bot has access to.\n * @param  {[type]}  message [description]\n * @param  {[type]}  client  [description]\n * @return {Boolean}         [description]\n */\nexport function listRoles(message, client) {\n  if (message.content === \"$listRoles\") {\n    console.log(\"listing roles\")\n    const roleList = message.member.guild.roles.map(\n      r =>\n        `**$Name**: ${r.name}, **Members**: ${r.members.size}, **ID:** ${r.id}`\n    )\n    message.channel.send(roleList.join(\"\\n\"), { split: true })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/commands/admin-commands.js","import * as DB from \"../database/database.js\"\n\n/**\n * A base event class with some prototype methods.\n */\nclass Event {\n  constructor() {\n    this.instantiate()\n  }\n\n  instantiate() {\n    console.log(\"Event instancied\")\n  }\n}\n\n/**\n * Outputs something on a role change.\n */\nexport class guildMemberUpdate extends Event {\n  constructor() {\n    super()\n    console.log(\"guildMemberUpdate ready\")\n    this.eventName = \"guildMemberUpdate\"\n    Array.prototype.diff = function(array) {\n      return this.filter(x => !array.includes(x))\n    }\n  }\n\n  async handleEvent(client, oldM, newM) {\n    console.log(\"Handling \" + this.eventName)\n\n    const conf = await DB.Connect(oldM.guild)\n      .table(\"configuration\")\n      .get(0)\n      .run()\n\n    let oldRoles = oldM.roles.map(r => r.name)\n    let newRoles = newM.roles.map(r => r.name)\n    let ignore = []\n    ignore.push(conf.attendingRole)\n    let removed = oldRoles.diff(newRoles).diff(ignore)\n    let added = newRoles.diff(oldRoles).diff(ignore)\n    let channel = oldM.guild.channels.find(\"name\", \"general\")\n    console.log(`Added ${added}, removed ${removed}`)\n    if (removed.length > 0) {\n      channel.send(\n        `${oldM.displayName} is no longer **${removed.toString()}**.`\n      )\n    }\n    if (added.length > 0) {\n      channel.send(`${oldM.displayName} is now **${added.toString()}**.`)\n    }\n  }\n}\n\n/**\n * React to stuff\n * @type {String}\n */\nexport class messageReactionAdd extends Event {\n  constructor() {\n    super()\n    console.log(\"messageReactionAdd ready\")\n    this.eventName = \"messageReactionAdd\"\n  }\n\n  handleEvent(client, messageReaction, user) {\n    const emojiKey = messageReaction.emoji.id\n      ? `${messageReaction.emoji.name}:${messageReaction.emoji.id}`\n      : messageReaction.emoji.name\n\n    // Send :heartpulse: randomly on reactions\n    // let randomly = Math.floor(Math.random() * 3)\n    // if (user.id != client.user.id && randomly == 1) {\n    //   messageReaction.message.react(\"ðŸ’—\")\n    // }\n\n    //Send LUL when LUL\n    const lul = messageReaction.message.guild.emojis.find(\"name\", \"LUL\")\n    if (messageReaction.emoji == lul) {\n      console.log(\"Found specific reaction\")\n      messageReaction.message.react(lul)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/events/events.js","module.exports = require(\"@babel/runtime/core-js/object/get-prototype-of\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/object/get-prototype-of\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/possibleConstructorReturn\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"@babel/runtime/helpers/inherits\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/inherits\"\n// module id = 26\n// module chunks = 0","import moment from \"moment-timezone\"\nimport Sugar from \"sugar\"\n\nimport * as Nodewar from \"./features.js\"\nimport * as NodewarDB from \"./db.js\"\nimport * as DB from \"../database/database.js\"\n\n// const schedule = require(\"node-schedule\")\n\nconst timezone = \"Europe/Paris\"\n//Mom&Dad,WeebOverlords,Lider,Test\n\n/**\n * NodeWar Handler\n * @param  {[type]} message    [description]\n * @param  {[type]} client [description]\n * @return {[type]}        [description]\n */\nexport async function handleNodeWar(message, client) {\n  const key = {}\n  key.nodewar = \"$nodewar\"\n  key.list = \"$nwlist\"\n  key.attend = \"$attend\"\n  key.cancel = \"$cancel\"\n  if (!Object.values(key).some(k => message.content.startsWith(k))) {\n    // console.log(\"No nodewar\")\n    return\n  }\n  //Find the name of the nodewar channel for the guild\n  //Find the name of the Attending role and create it if it doesn't exist\n  const conf = await DB.Connect(message.guild)\n    .table(\"configuration\")\n    .get(0)\n    .run()\n  // console.log(conf)\n  let nodewarChannel = conf.nodeWarChannel\n  let attendingRole = conf.attendingRole\n\n  const filter = function(m) {\n    //Check that we have the same author and only 1 word\n    if (m.author.id == message.author.id && m.content.split(\" \".length == 1)) {\n      console.log(\"Valid Answer\")\n      return true\n    }\n  }\n\n  if (!nodewarChannel) {\n    //Handle auth\n    message.channel\n      .send(\n        `Please type-in the name of the channel you want to use for the nodewar features. \\n **Existing channels** : \\n${message.member.guild.channels\n          .filter(c => c.type == \"text\")\n          .map(c => `**-** ${c.name}`)\n          .join(\"\\n\")}`\n      )\n      .then(() => {\n        message.channel\n          .awaitMessages(filter, {\n            maxMatches: 1,\n            time: 60000,\n            errors: [\"time\"]\n          })\n          .then(collected => {\n            // console.log(collected)\n            let nwChannel = collected.first().content\n            if (!message.member.guild.channels.find(\"name\", nwChannel)) {\n              message.member.guild\n                .createChannel(nwChannel, \"text\")\n                .then(c => console.log(`Created new nodewar channel ${c}.`))\n                .then(() =>\n                  handleRouting(message, client, key, conf, nwChannel)\n                )\n            } else {\n              handleRouting(message, client, key, conf, nwChannel)\n            }\n          })\n      })\n      .catch(console.error)\n  } else {\n    handleRouting(message, client, key, conf, nodewarChannel)\n  }\n}\n\nfunction handleRouting(message, client, key, conf, channelName) {\n  console.log(\"Handling key Routing\")\n  let nodeWarChannel = message.member.guild.channels.find(\"name\", channelName)\n  if (!nodeWarChannel || !conf.nodeWarChannel) {\n    console.log(\"Updating configuration\")\n    DB.UpdateConfiguration(message.guild, { nodeWarChannel: channelName }).then(\n      () => {\n        let nodeWarChannel = message.member.guild.channels.find(\n          \"name\",\n          channelName\n        )\n        message.channel.send(channelName + \" is now the nodewar channel.\")\n      }\n    )\n  }\n\n  if (!conf.attendingRole) {\n    console.log(\"Set an attending role.\")\n    return\n  }\n  let role = message.member.guild.roles.find(\"name\", conf.attendingRole)\n  if (!role) {\n    //Create Role\n    console.log(\"Creating Attending role...\")\n    message.guild\n      .createRole({ name: conf.attendingRole, color: \"GREEN\" })\n      .then(role => message.channel.send(`Created role ${role.name}.`))\n      .catch(console.error)\n  }\n  if (message.content.startsWith(key.nodewar)) {\n    nodewarManager(message, client, nodeWarChannel, role, conf)\n  }\n  if (message.content.startsWith(key.list)) {\n    Nodewar.listAttendingMembers(message, nodeWarChannel, role, conf)\n  }\n  if (message.content.startsWith(key.attend)) {\n    Nodewar.attendNodeWar(message, nodeWarChannel, role)\n  }\n  if (message.content.startsWith(key.cancel)) {\n    Nodewar.cancelNodeWarAttendance(message, nodeWarChannel, role)\n  }\n}\n\n/**\n * Handle nodewar related commands.\n * @param  {[type]} message    [description]\n * @param  {[type]} client [description]\n * @return {[type]}        [description]\n */\nfunction nodewarManager(message, client, nodeWarChannel, attendingRole, conf) {\n  console.log(\"UPSchan specific $nodewar commands\")\n  let channel = message.channel\n  let node\n  let args = message.content\n    .slice(1)\n    .trim()\n    .split(/ +/g)\n  let command = args.shift().toLowerCase()\n  let firstArg = args[0]\n  let secondArg = args[1]\n\n  console.log(JSON.stringify(args))\n  //Help\n  if (firstArg === \"help\") {\n    Nodewar.sendHelp(message, client)\n    return\n  }\n  //If no auth we return early\n  if (!Nodewar.canCreateNodeWar(message.member, conf.adminRolesIds)) {\n    message.reply(\"Gtfo scrub.\")\n    return\n  }\n  //If only $nodewar is passed we do stuff\n  if (args.length == 0) {\n    NodewarDB.nodewarCheck(message)\n    return\n  }\n\n  //Cancel command\n  if (firstArg === \"cancel\") {\n    NodewarDB.cancelNodeWar(message, nodeWarChannel, attendingRole)\n    return\n  }\n  //Win command\n  if (firstArg === \"win\") {\n    console.log(\"VI VON ZULUL\")\n    NodewarDB.endNodeWar(message, nodeWarChannel, attendingRole, firstArg)\n    return\n  }\n  //Loss Command\n  if (firstArg === \"loss\") {\n    console.log(\"We lost\")\n    NodewarDB.endNodeWar(message, nodeWarChannel, attendingRole, firstArg)\n    return\n  }\n\n  //Changing NW Channel command\n  if (\n    firstArg === \"channel\" &&\n    message.member.permissions.has(\"ADMINISTRATOR\")\n  ) {\n    let c = message.member.guild.channels.find(\"name\", secondArg)\n    if (!c) return\n    DB.UpdateConfiguration(message.guild, { nodeWarChannel: c.name })\n    message.reply(\"Nodewar channel successfully set.\")\n    return\n  }\n\n  //Changing Privileged roles command\n  if (firstArg === \"role\" && message.member.permissions.has(\"ADMINISTRATOR\")) {\n    console.log(\"Updating role\")\n    let r = message.member.guild.roles.find(\"name\", args[2])\n    if (!r) return\n    if (secondArg === \"add\") {\n      DB.UpdateConfigurationArray(message.guild, \"adminRolesIds\", r.id, false)\n      message.reply(\"Privileged roles successfully added.\")\n    }\n    if (secondArg === \"remove\") {\n      DB.UpdateConfigurationArray(message.guild, \"adminRolesIds\", r.id, true)\n      message.reply(\"Privileged roles successfully removed.\")\n    }\n    return\n  }\n\n  //Assume that firstArg is a date, check if we're authorized to do so & that we have a date\n  if (\n    Nodewar.canCreateNodeWar(message.member, conf.adminRolesIds) &&\n    firstArg\n  ) {\n    Sugar.Date.setLocale(\"en-GB\")\n    let sugarDate = Sugar.Date.create(firstArg)\n    let tzDate = moment.tz(sugarDate, timezone)\n    if (tzDate.isValid()) {\n      message.reply(\n        `Well met! Let's do a nodewar on the ${tzDate.format(\n          \"dddd, MMMM Do YYYY\"\n        )}`\n      )\n      NodewarDB.createNodeWar(message, tzDate)\n    } else {\n      message.reply(\"I'm sorry, the date you told me is invalid. :(\")\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/nodewars/nodewar.js","module.exports = require(\"@babel/runtime/core-js/object/values\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/object/values\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"sugar\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sugar\"\n// module id = 29\n// module chunks = 0","import moment from \"moment-timezone\"\n\nimport * as Messages from \"../verbose/messages.js\"\nimport * as DB from \"../database/database.js\"\n\nimport { clearAttendingMembers } from \"./features.js\"\n// const r = require(\"rethinkdbdash\")({db: \"test\"})\nconst timezone = \"Europe/Paris\"\n\n/**\n * End a nodewar\n * @param  {[Object]} message [The initial message]\n * @param  {[Object]} channel [The Nodewar channel]\n * @param  {[Object]} role    [The Attending Role]\n * @param  {[String]} result  [Win or Loss]\n * @return {[type]}         [description]\n */\nexport function endNodeWar(message, channel, role, result) {\n  //1.Fetch the current nodewar.\n  //2. Update it with the results\n  //3. Clear the attendingmembers.\n  let victory\n  if (result == \"win\") {\n    victory = true\n  }\n  if (result == \"loss\") {\n    victory = false\n  }\n  let updatedNW = {\n    isActive: false,\n    victory: victory,\n    attendingMembers: message.member.guild.roles\n      .find(\"name\", role.name)\n      .members.map(m => m.user.id)\n  }\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .filter({ isActive: true })\n    .update(updatedNW)\n    .run()\n    .then(result => {\n      console.log(JSON.stringify(result, null, 2))\n      if (victory) {\n        message.channel.send(Messages.getRandomWinMessage())\n        setNodewarTopic(message, \"EZ game EZ win EZ\")\n      } else {\n        message.channel.send(Messages.getRandomLossMessage())\n        setNodewarTopic(message, \"We got unlucky.\")\n      }\n      clearAttendingMembers(message, channel, role)\n    })\n}\n\n/**\n * Cancel a nodewar event\n * @param  {[type]} message [description]\n * @return {[type]}         [description]\n */\nexport function cancelNodeWar(message, channel, role) {\n  console.log(\"Cancelling nodewar...\")\n  console.log(role)\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .filter({ isActive: true })\n    .delete()\n    .run()\n    .then(result => {\n      console.log(JSON.stringify(result, null, 2))\n      message.reply(`NodeWar successfully canceled.`)\n      setNodewarTopic(message, \"UPS will prevail soon.\")\n      clearAttendingMembers(message, channel, role)\n    })\n}\n\n/**\n * Write a nodewar event to the filesystem.\n * @param  {[type]} message [description]\n * @param  {[type]} date    [description]\n * @return {[type]}         [description]\n */\nexport function createNodeWar(message, date) {\n  console.log(\"Trying to create a nodewar...\")\n  let endDate = date.add({ hours: 10, minutes: 30 })\n  let fDate = date.format(\"dddd, MMMM Do YYYY\")\n  let nwObject = {\n    isActive: true,\n    victory: false,\n    date: date.format(),\n    createdAt: moment.tz(moment(), timezone).format(),\n    creatorId: message.member.id,\n    attendingMembers: 0\n  }\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .filter({ isActive: true })\n    .run()\n    .then(result => {\n      if (result.length == 1) {\n        updateCurrentNodeWar(nwObject, message)\n        message.reply(`Modified the current Nodewar.`)\n        setNodewarTopic(message, `Nodewar => ${fDate} !`)\n      }\n      if (result.length == 0) {\n        insertNewNodeWar(nwObject, message)\n        message.reply(\"New nodewar created !\")\n        setNodewarTopic(message, `Nodewar => ${fDate} !`)\n      }\n      if (result.length > 1) {\n        message.reply(\"DB ERROR, need to be resynced.\")\n      }\n    })\n}\n\n/**\n * Initiate the async sequence for answering to $nodewar\n * @param  {[type]} message [description]\n * @return {[type]}         [description]\n */\nexport function nodewarCheck(message) {\n  console.log(\"Hello\")\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .filter({ isActive: true })\n    .run()\n    .then(result => {\n      console.log(\"fetchActiveNodewar result\")\n      respondNodewar(message, result)\n    })\n}\n\n//Update a node war\nfunction updateCurrentNodeWar(nwObject, message) {\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .filter({ isActive: true })\n    .update({ date: nwObject.date })\n    .run()\n    .then(result => {\n      console.log(JSON.stringify(result, null, 2))\n    })\n  console.log(\"Updated nodewar.\")\n}\n\n//Insert a node war\nfunction insertNewNodeWar(nwObject, message) {\n  DB.Connect(message.guild)\n    .table(\"nodewar\")\n    .insert(nwObject)\n    .run()\n    .then(result => {\n      console.log(JSON.stringify(result, null, 2))\n    })\n  console.log(\"Created nodewar\")\n}\n\n//The actual response sent by the bot.\nfunction respondNodewar(message, result) {\n  if (result.length == 1) {\n    let fDate = moment(result[0].date).format(\"dddd, MMMM Do YYYY\")\n    setNodewarTopic(message, `Nodewar => ${fDate} !`)\n    message.reply(`Nodewar scheduled for ${fDate}.`)\n  } else {\n    message.reply(\"When would you like to create a nodewar?\")\n  }\n}\n\n//Set the topic for the nw channel\nasync function setNodewarTopic(message, topic) {\n  console.log(\"Setting topic\")\n  const conf = await DB.Connect(message.guild)\n    .table(\"configuration\")\n    .get(0)\n    .run()\n  const nodeWarChannel = message.member.guild.channels.find(\n    \"name\",\n    conf.nodeWarChannel\n  )\n  nodeWarChannel.setTopic(topic)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/nodewars/db.js","import { GifGenerator } from \"./gifgenerator.js\"\nimport { getRandomDontSpoilMessage } from \"../verbose/messages.js\"\n\nconst fs = require(\"fs\")\n\n/**\n * Inspired by @TimboKZ https://github.com/TimboKZ/discord-spoiler-bot/\n */\n\n/**\n * Class for a spoiler.\n * @param {DiscordMessage} message\n * @param {string} topic\n * @param {string} content\n */\nclass Spoiler {\n  constructor(message, topic, content) {\n    this.message = message\n    this.topic = topic\n    this.content = content\n  }\n}\n\n/**\n * Handle the spoiler syntax and spoil the content.\n * @param  {[type]}  message [description]\n * @param  {[type]}  client  [description]\n * @return {Boolean}         [description]\n */\nexport function spoilThisContent(message, client) {\n  if (message.content.match(/^.+\\$spoiler.+$/)) {\n    console.log(\"Spoiler\")\n    let parts = message.content.split(\"$spoiler\")\n    let spoiler = new Spoiler(message, parts[0], parts[1])\n    message.delete()\n    message.channel.send(`**${getRandomDontSpoilMessage()}**`).then(m => {\n      setTimeout(() => {\n        m.delete()\n      }, 3000)\n    })\n\n    // message.channel.send(\"New content\")\n    printSpoiler(spoiler)\n  }\n}\n\n/**\n * Print a Spoiler message.\n * @param  {Class} spoiler [Must be a spoiler class]\n */\nfunction printSpoiler(spoiler) {\n  let messageContent = `**${spoiler.topic}** spoiler`\n  let maxLines = 30\n  const g = new GifGenerator()\n  g.createSpoilerGif(spoiler, maxLines, filePath => {\n    sendFile(spoiler.message, filePath, \"spoiler.gif\", messageContent, () => {\n      console.log(\"Deleting The Gif\")\n      fs.unlink(\n        filePath,\n        err => (err ? console.error(`Could not remove GIF: ${err}`) : null)\n      )\n    })\n  })\n}\n\n/**\n * Reply to a message with a file.\n * @param  {DiscordjsMessage}   message  [description]\n * @param  {String}   filePath [description]\n * @param  {String}   fileName [description]\n * @param  {String}   content  [description]\n * @param  {Function} done     Callback\n */\nfunction sendFile(message, filePath, fileName, content, done) {\n  let options = {\n    files: [\n      {\n        attachment: filePath,\n        name: fileName\n      }\n    ]\n  }\n  message\n    .reply(content, options)\n    .then(() => done())\n    .catch(error => console.log(`Error sending file: ${error}`))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/spoiler/spoiler.js","import Canvas from \"canvas-prebuilt\"\nimport GIFEncoder from \"gifencoder\"\nimport sanitize from \"sanitize-filename\"\nimport { getRandomDontSpoilMessage } from \"../verbose/messages.js\"\n\nconst path = require(\"path\")\nconst fs = require(\"fs\")\n\nconst Font = Canvas.Font\nconst GIF_PATH = \"assets/gifs\"\nconst FONT_PATH = \"assets/fonts\"\nconst SOURCE_SANS_PRO = Font\n  ? new Font(\n      \"SourceSansPro\",\n      path.join(\"assets/fonts\", \"SourceSansPro-Regular.ttf\")\n    )\n  : null\n\n/**\n * With the courtesy of @TimboKZ https://github.com/TimboKZ/discord-spoiler-bot/blob/master/src/GifGenerator.js\n */\nexport class GifGenerator {\n  constructor(gifConfig) {\n    if (!gifConfig) gifConfig = {}\n    if (!gifConfig.colours) {\n      if (gifConfig.colors) {\n        gifConfig.colours = gifConfig.colors\n        delete gifConfig.colors\n      } else {\n        gifConfig.colours = {}\n      }\n    }\n    /**\n     * @type {{margin: number, width: number, lineHeight: number, placeholderText: string, fontSize: string}}\n     */\n    this.config = Object.assign(\n      {\n        margin: 10,\n        width: 400,\n        lineHeight: 40,\n        placeholderText: getRandomDontSpoilMessage(),\n        fontSize: \"13px\"\n      },\n      gifConfig\n    )\n    /**\n     * @type {{background: string, stroke: string, text: string, placeholder: string}}\n     */\n    this.config.colours = Object.assign(\n      {\n        background: \"#3c3f44\",\n        stroke: \"#b2ac94\",\n        text: \"#c0ba9e\",\n        placeholder: \"#8c8775\"\n      },\n      gifConfig.colours\n    )\n    this.config.lineWidth = this.config.width - this.config.margin * 2\n  }\n\n  /**\n   * @callback done\n   * @param {string} filePath\n   */\n\n  /**\n   * @param {Spoiler} spoiler\n   * @param {number} maxLines\n   * @param {done} done\n   * @return {string}\n   */\n  createSpoilerGif(spoiler, maxLines, done) {\n    let hash = `${sanitize(spoiler.message.member.displayName)}-${\n      spoiler.message.id\n    }-${new Date().getTime()}`\n    let gifPath = path.join(GIF_PATH, `${hash}.gif`)\n    this.createGif(spoiler, maxLines, gifPath, done)\n    return gifPath\n  }\n\n  /**\n   * @param {Spoiler} spoiler\n   * @param {number} maxLines\n   * @param {string} filePath\n   * @param {done} done\n   */\n  createGif(spoiler, maxLines, filePath, done) {\n    let lines = this.prepareLines(spoiler, maxLines)\n    let height = (lines.length + 0.5) * this.config.lineHeight / 2\n    let context = this.createCanvasContext(height)\n    let encoder = this.prepareEncoder(height, filePath, done)\n    this.renderSpoilerMessage(context, encoder, height)\n    this.renderLines(context, encoder, height, lines)\n    encoder.finish()\n  }\n\n  /**\n   * @param {Spoiler} spoiler\n   * @param {number} maxLines\n   * @return {string[]}\n   */\n  prepareLines(spoiler, maxLines) {\n    let context = this.createCanvasContext(15)\n    return this.breakIntoLines(spoiler.content, context, maxLines)\n  }\n\n  /**\n   * @param {string} text\n   * @param {Context2d} context\n   * @param {number} maxLines\n   * @return {string[]}\n   */\n  breakIntoLines(text, context, maxLines) {\n    let lines = []\n    let linesBreak = text.split(\"\\n\")\n    for (let j = 0; j < linesBreak.length; j++) {\n      let line = \"\"\n      let words = linesBreak[j].split(\" \")\n      for (let i = 0; i < words.length; i++) {\n        if (line !== \"\") line += \" \"\n        let word = words[i]\n        let max = Math.max(\n          context.measureText(line).width,\n          context.measureText(line + word).width\n        )\n        if (max > this.config.lineWidth) {\n          lines.push(line)\n          line = \"\"\n        }\n        line += word\n      }\n      if (line !== \"\" || lines.length === 0) {\n        lines.push(line)\n      }\n    }\n    if (lines.length > maxLines) {\n      lines = lines.slice(0, maxLines)\n      lines[lines.length - 1] += \"...\"\n    }\n    return lines\n  }\n\n  /**\n   * @param {number} height\n   * @param {string} filePath\n   * @param {done} done\n   * @return {GIFEncoder}\n   */\n  prepareEncoder(height, filePath, done) {\n    let encoder = new GIFEncoder(this.config.width, height)\n    let readStream = encoder.createReadStream()\n    let writeStream = fs.createWriteStream(filePath)\n    readStream.pipe(writeStream)\n    writeStream.on(\"close\", () => done(filePath))\n    encoder.start()\n    encoder.setRepeat(-1)\n    encoder.setDelay(500)\n    encoder.setQuality(10)\n    return encoder\n  }\n\n  /**\n   * @param {Context2d} context\n   * @param {GIFEncoder} encoder\n   * @param {number} height\n   */\n  renderSpoilerMessage(context, encoder, height) {\n    this.clearContextBackground(context, height)\n    this.renderTextToContext(\n      context,\n      this.config.lineHeight / 2,\n      this.config.placeholderText,\n      this.config.colours.placeholder\n    )\n    encoder.addFrame(context)\n  }\n\n  /**\n   * @param {Context2d} context\n   * @param {GIFEncoder} encoder\n   * @param {number} height\n   * @param {string[]} lines\n   */\n  renderLines(context, encoder, height, lines) {\n    this.clearContextBackground(context, height)\n    for (let i = 0; i < lines.length; i++) {\n      let line = lines[i]\n      let marginTop = this.config.lineHeight / 2 * (i + 1)\n      this.renderTextToContext(\n        context,\n        marginTop,\n        line,\n        this.config.colours.text\n      )\n    }\n    encoder.addFrame(context)\n  }\n\n  /**\n   * @param {number} height\n   * @return {Context2d}\n   */\n  createCanvasContext(height) {\n    let canvas = new Canvas(this.config.width, height)\n    let context = canvas.getContext(\"2d\")\n    if (SOURCE_SANS_PRO !== null) {\n      context.addFont(SOURCE_SANS_PRO)\n    }\n    let fontName =\n      SOURCE_SANS_PRO !== null ? \"aSourceSansPro\" : '\"Lucida Sans Unicode\"'\n    context.font = `${this.config.fontSize} ${fontName}`\n    return context\n  }\n\n  /**\n   * @param {Context2d} context\n   * @param {number} height\n   */\n  clearContextBackground(context, height) {\n    context.fillStyle = this.config.colours.background\n    context.strokeStyle = this.config.colours.stroke\n    context.rect(0, 0, this.config.width, height)\n    context.fill()\n    context.stroke()\n  }\n\n  /**\n   *\n   * @param {Context2d} context\n   * @param {number} marginTop\n   * @param {string} text\n   * @param {string} colour\n   */\n  renderTextToContext(context, marginTop, text, colour) {\n    context.fillStyle = colour\n    context.fillText(text, this.config.margin, marginTop)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/spoiler/gifgenerator.js","module.exports = require(\"@babel/runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/object/assign\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"canvas-prebuilt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"canvas-prebuilt\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"gifencoder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gifencoder\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"sanitize-filename\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sanitize-filename\"\n// module id = 36\n// module chunks = 0","import yaml from \"js-yaml\"\nimport _ from \"lodash\"\n\nconst fs = require(\"fs\")\nconst path = require(\"path\")\n\nimport { getRandomGoodLuckMessage } from \"../verbose/messages.js\"\nimport { isWordInList } from \"../helpers.js\"\n\n/**\n * Handle what we do when we get the keyword related to ehnancing.\n * @param {Message} message Message Object from DiscordJS\n * @param {Client} client DiscordJS client.\n */\nexport function handleEnhance(message, client) {\n  const keyFs = \"$fs\"\n  if (message.content.startsWith(keyFs)) {\n    failstackManager(message, client)\n  }\n}\n\n/**\n * Failstack logic.\n * @param {Message} message Message Object from DiscordJS\n * @param {Client} client DiscordJS client.\n */\nfunction failstackManager(message, client) {\n  let args = message.content\n    .slice(1)\n    .trim()\n    .split(/ +/g)\n  let command = args.shift().toLowerCase()\n  let firstArg = args[0]\n  let secondArg = args[1]\n  let failstacks\n  let target\n  let names = []\n  let notHelping = true\n\n  //Parse the failstacks.yaml\n  try {\n    failstacks = yaml.safeLoad(\n      fs.readFileSync(path.join(\"bot/enhancing\", \"failstacks.yaml\"), \"utf8\")\n    )\n    target = yaml.safeLoad(\n      fs.readFileSync(path.join(\"bot/enhancing\", \"target.yaml\"), \"utf8\")\n    )\n    // console.log(data)\n  } catch (e) {\n    console.log(e)\n  }\n  target = target.target\n  const grades = Object.keys(target)\n  //Get all the object names\n  Object.entries(failstacks).forEach(([key, ...type]) => {\n    _.flattenDeep(type).forEach(o => names.push(o.name))\n  })\n  names = _.flattenDeep(names)\n\n  if (!firstArg || !secondArg) {\n    return message.reply(\n      `Please use the command correctly. Refer to **$help**.`\n    )\n  }\n  if (isWordInList(firstArg, grades) && isWordInList(secondArg, names)) {\n    //Iterate over failstacks file.\n    Object.entries(failstacks).forEach(([key, ...obj]) => {\n      //Iterate over each flatten subdivision\n      _.flattenDeep(obj).forEach(iType => {\n        if (isWordInList(secondArg, iType.name)) {\n          //Iterate over itemtypes properties.\n          Object.entries(iType).forEach(([k, v]) => {\n            if (v.current == target[firstArg]) {\n              notHelping = false\n              message.reply(\n                `Use stacks ranging from ${v.minStack} to ${\n                  v.maxStack\n                }. ${getRandomGoodLuckMessage()}`\n              )\n            }\n          })\n        }\n      })\n    })\n    console.log(\"nothelping?\")\n    notHelping\n      ? message.reply(\n          `You should definitely know how to make that ${firstArg} ${secondArg} yourself. I'm not helping you.`\n        )\n      : null\n  } else {\n    message.reply(\n      `I don't know what a ${firstArg} ${secondArg} is, I'm sorry :(`\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/enhancing/enhancing.js","module.exports = require(\"@babel/runtime/helpers/toArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/toArray\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"@babel/runtime/core-js/object/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/core-js/object/keys\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 41\n// module chunks = 0","export function superSplit(string, n) {\n  return Array(Math.ceil(string.length / n))\n    .fill()\n    .map((a, i) => [...string].slice(i * n, i * n + n).join(\"\"))\n}\n\nexport function superArraySplit(array, n) {\n  let T = array.join(\"\\n\")\n  return Array(Math.ceil(T.length / n))\n    .fill()\n    .map((a, i) => array.slice(i * n, i * n + n).join(\"\"))\n}\n\nexport function regexSplit(string, n) {\n  return string.match(new RegExp(`[\\\\s\\\\S]{1,${n}}`, \"g\")) || []\n}\n\nexport function isWordInList(word, list) {\n  if (list.length > 0) {\n    return list.some(w => w.toLowerCase() == word.toLowerCase())\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./bot/helpers.js","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/helpers/toConsumableArray\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"discord.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"discord.js\"\n// module id = 44\n// module chunks = 0","module.exports = {\"token\":\"NDAzNTk0MTE4MDU3NTU4MDE2.DVT73g.GoIuAHI5CQZJp55rqzFsPWEEJUU\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./auth.json\n// module id = 45\n// module chunks = 0"],"sourceRoot":""}